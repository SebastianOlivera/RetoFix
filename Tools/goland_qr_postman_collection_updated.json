{
  "info": {
    "_postman_id": "74f92057-3172-4a50-a20c-d03d9b7d30df",
    "name": "Goland QR Backend - Full API Smoke Tests",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Colección generada automáticamente a partir de los schemas provistos. Incluye CRUD básicos y requests típicos. Si algún path difiere en tu repo, ajustá el `raw` URL de ese request.\n\nActualización: se eliminó DELETE de Usuarios. En Campos se quitó archivokmz de los bodies JSON (KMZ va por /campos/{id}/kmz) y se agregaron requests Upload/Download/Delete KMZ."
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login (get JWT)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mail\": \"{{admin_mail}}\",\n  \"password\": \"{{admin_password}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.expect(data).to.have.property(\"access_token\");",
                  "pm.environment.set(\"token\", data.access_token);",
                  "if (data.expires_in) pm.environment.set(\"token_expires_in\", data.expires_in);"
                ]
              }
            }
          ]
        },
        {
          "name": "Validate token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/validate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "validate"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{token}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.expect(data).to.have.property(\"valid\");"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Usuarios",
      "item": [
        {
          "name": "Create Usuarios",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "usuarios"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mail\": \"user{{random_int}}@example.com\",\n  \"rol\": \"admin\",\n  \"nombre\": \"Usuario Test\",\n  \"password\": \"123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201/200\", () => pm.expect([200,201]).to.include(pm.response.code));",
                  "const data = pm.response.json();",
                  "if (data && data.usuarioid !== undefined) pm.environment.set(\"usuarioid\", data.usuarioid);"
                ]
              }
            }
          ]
        },
        {
          "name": "List Usuarios",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "usuarios"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Usuarios by id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios/{{usuarioid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "usuarios",
                "{{usuarioid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Usuarios (PUT)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios/{{usuarioid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "usuarios",
                "{{usuarioid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mail\": \"user{{random_int}}@example.com\",\n  \"rol\": \"admin\",\n  \"nombre\": \"Usuario Test Update\",\n  \"password\": \"123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Patch Usuarios (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios/{{usuarioid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "usuarios",
                "{{usuarioid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mail\": \"user{{random_int}}@example.com\",\n  \"rol\": \"admin\",\n  \"nombre\": \"Usuario Test Update\",\n  \"password\": \"123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Productos",
      "item": [
        {
          "name": "Create Productos",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/productos",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "productos"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombrecomercial\": \"Producto Test {{random_int}}\",\n  \"descripcion\": \"desc\",\n  \"imagenurl\": null,\n  \"categoria\": \"test\",\n  \"porciones\": 1,\n  \"mododeuso\": \"uso\",\n  \"pdfurl\": null,\n  \"claim\": \"a;b;c\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201/200\", () => pm.expect([200,201]).to.include(pm.response.code));",
                  "const data = pm.response.json();",
                  "if (data && data.productoid !== undefined) pm.environment.set(\"productoid\", data.productoid);"
                ]
              }
            }
          ]
        },
        {
          "name": "List Productos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/productos",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "productos"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Productos by id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/productos/{{productoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "productos",
                "{{productoid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Productos (PUT)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/productos/{{productoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "productos",
                "{{productoid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombrecomercial\": \"Producto Test {{random_int}} upd\",\n  \"descripcion\": \"desc2\",\n  \"categoria\": \"test2\",\n  \"porciones\": 2,\n  \"mododeuso\": \"uso2\",\n  \"claim\": \"x;y\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Patch Productos (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/productos/{{productoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "productos",
                "{{productoid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombrecomercial\": \"Producto Test {{random_int}} upd\",\n  \"descripcion\": \"desc2\",\n  \"categoria\": \"test2\",\n  \"porciones\": 2,\n  \"mododeuso\": \"uso2\",\n  \"claim\": \"x;y\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Productos",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/productos/{{productoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "productos",
                "{{productoid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 204/200\", () => pm.expect([200,204]).to.include(pm.response.code));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Campos",
      "item": [
        {
          "name": "Create Campos",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Campo {{random_int}}\",\n  \"departamento\": \"Montevideo\",\n  \"tipomanejo\": \"Convencional\",\n  \"coordenadas\": \"-34.9,-56.2\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201/200\", () => pm.expect([200,201]).to.include(pm.response.code));",
                  "const data = pm.response.json();",
                  "if (data && data.campoid !== undefined) pm.environment.set(\"campoid\", data.campoid);"
                ]
              }
            }
          ]
        },
        {
          "name": "List Campos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Campos by id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos/{{campoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos",
                "{{campoid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Campos (PUT)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos/{{campoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos",
                "{{campoid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Campo {{random_int}} upd\",\n  \"departamento\": \"Canelones\",\n  \"tipomanejo\": \"Orgánico\",\n  \"coordenadas\": \"-34.8,-56.1\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Patch Campos (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos/{{campoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos",
                "{{campoid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Campo {{random_int}} upd\",\n  \"departamento\": \"Canelones\",\n  \"tipomanejo\": \"Orgánico\",\n  \"coordenadas\": \"-34.8,-56.1\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Campos",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos/{{campoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos",
                "{{campoid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 204/200\", () => pm.expect([200,204]).to.include(pm.response.code));"
                ]
              }
            }
          ]
        },
        {
          "name": "Upload KMZ (multipart)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos/{{campoid}}/kmz",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos",
                "{{campoid}}",
                "kmz"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ]
        },
        {
          "name": "Download KMZ",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos/{{campoid}}/kmz",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos",
                "{{campoid}}",
                "kmz"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete KMZ",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/campos/{{campoid}}/kmz",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "campos",
                "{{campoid}}",
                "kmz"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Cultivos",
      "item": [
        {
          "name": "Create Cultivos",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cultivos",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cultivos"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"variedad\": \"Soja {{random_int}}\",\n  \"practicasagronomicas\": \"-\",\n  \"usofertilizante\": \"-\",\n  \"condicionesclimaticas\": \"-\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201/200\", () => pm.expect([200,201]).to.include(pm.response.code));",
                  "const data = pm.response.json();",
                  "if (data && data.cultivoid !== undefined) pm.environment.set(\"cultivoid\", data.cultivoid);"
                ]
              }
            }
          ]
        },
        {
          "name": "List Cultivos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cultivos",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cultivos"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Cultivos by id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cultivos/{{cultivoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cultivos",
                "{{cultivoid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Cultivos (PUT)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cultivos/{{cultivoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cultivos",
                "{{cultivoid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"variedad\": \"Trigo {{random_int}}\",\n  \"practicasagronomicas\": \"upd\",\n  \"usofertilizante\": \"upd\",\n  \"condicionesclimaticas\": \"upd\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Patch Cultivos (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cultivos/{{cultivoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cultivos",
                "{{cultivoid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"variedad\": \"Trigo {{random_int}}\",\n  \"practicasagronomicas\": \"upd\",\n  \"usofertilizante\": \"upd\",\n  \"condicionesclimaticas\": \"upd\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Cultivos",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cultivos/{{cultivoid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cultivos",
                "{{cultivoid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 204/200\", () => pm.expect([200,204]).to.include(pm.response.code));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Lotes",
      "item": [
        {
          "name": "Create Lote",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/lotes",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "lotes"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"campoid\": \"{{campoid}}\",\n  \"fechasiembra\": \"2025-01-01\",\n  \"fechacosecha\": null,\n  \"fechaprocesamiento\": null,\n  \"fechavencimiento\": null\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201/200\", () => pm.expect([200,201]).to.include(pm.response.code));",
                  "const data = pm.response.json();",
                  "if (data && data.loteid !== undefined) pm.environment.set(\"loteid\", data.loteid);"
                ]
              }
            }
          ]
        },
        {
          "name": "List Lotes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/lotes",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "lotes"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Lote by id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/lotes/{{loteid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "lotes",
                "{{loteid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Lote (PUT)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/lotes/{{loteid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "lotes",
                "{{loteid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"campoid\": \"{{campoid}}\",\n  \"fechasiembra\": \"2025-01-02\",\n  \"fechacosecha\": \"2025-02-01\",\n  \"fechaprocesamiento\": null,\n  \"fechavencimiento\": null\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Lote",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/lotes/{{loteid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "lotes",
                "{{loteid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 204/200\", () => pm.expect([200,204]).to.include(pm.response.code));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Información Nutricional",
      "item": [
        {
          "name": "Create Info Nutricional",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/info-nutricional",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "info-nutricional"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productoid\": \"{{productoid}}\",\n  \"calorias\": 100,\n  \"proteinas\": 10,\n  \"grasas\": 5,\n  \"carbohidratos\": 20,\n  \"vitaminas\": \"A,C\",\n  \"minerales\": \"Fe\",\n  \"beneficios\": \"-\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201/200\", () => pm.expect([200,201]).to.include(pm.response.code));",
                  "const data=pm.response.json();",
                  "if (data && data.infonutricionalid!==undefined) pm.environment.set(\"infonutricionalid\", data.infonutricionalid);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Info Nutricional by id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/info-nutricional/{{infonutricionalid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "info-nutricional",
                "{{infonutricionalid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Info Nutricional (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/info-nutricional/{{infonutricionalid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "info-nutricional",
                "{{infonutricionalid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"calorias\": 120\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Control de Calidad",
      "item": [
        {
          "name": "Create Control Calidad",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/control-calidad",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "control-calidad"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loteid\": \"{{loteid}}\",\n  \"pdfurl\": null,\n  \"resumenresultados\": \"OK\",\n  \"responsable\": \"Laboratorio\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201/200\", () => pm.expect([200,201]).to.include(pm.response.code));",
                  "const data=pm.response.json();",
                  "if (data && data.controlcalidadid!==undefined) pm.environment.set(\"controlcalidadid\", data.controlcalidadid);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Control Calidad by id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/control-calidad/{{controlcalidadid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "control-calidad",
                "{{controlcalidadid}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Control Calidad (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/control-calidad/{{controlcalidadid}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "control-calidad",
                "{{controlcalidadid}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resumenresultados\": \"OK (upd)\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Storage (MinIO)",
      "item": [
        {
          "name": "Get presigned PUT URL",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/storage/presigned-put",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "storage",
                "presigned-put"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"file\": \"test.pdf\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", ()=> pm.response.to.have.status(200));",
                  "const data=pm.response.json();",
                  "if (data && data.url) pm.environment.set(\"presigned_put_url\", data.url);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Documents",
      "item": [
        {
          "name": "List documents",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/documents",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "documents"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", ()=> pm.response.to.have.status(200));",
                  "const data=pm.response.json();",
                  "if (data && data.results && data.results.length) pm.environment.set(\"document_id\", data.results[0].id);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Audit",
      "item": [
        {
          "name": "List audit logs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/audit/logs",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "audit",
                "logs"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "if (!pm.environment.get('random_int')) {",
          "  pm.environment.set('random_int', Math.floor(Math.random()*100000));",
          "}"
        ]
      }
    }
  ]
}